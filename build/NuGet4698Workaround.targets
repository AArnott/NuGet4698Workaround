<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <!-- This is part of a workaround for https://github.com/NuGet/Home/issues/4698
       The other part is the PackSatelliteAssemblies target in buildCrossTargeting. -->
  <Target Name="SatelliteDllsProjectOutputGroupWithTargetFramework"
          DependsOnTargets="SatelliteDllsProjectOutputGroup"
          Returns="@(_SatelliteDllsProjectOutputGroupOutputWithTargetFramework)">
    <ItemGroup>
      <_SatelliteDllsProjectOutputGroupOutputWithTargetFramework Include="@(SatelliteDllsProjectOutputGroupOutput)">
        <TargetFramework>$(TargetFramework)</TargetFramework>
      </_SatelliteDllsProjectOutputGroupOutputWithTargetFramework>

      <!-- Only newer projects (e.g. netstandard) set Culture because Microsoft.WinFX.targets
           overrides the targets change made in https://github.com/Microsoft/msbuild/pull/1404/files
           So fill in the blank here if necessary. -->
      <_SatelliteDllsProjectOutputGroupOutputWithTargetFramework>
        <Culture Condition=" '%(_SatelliteDllsProjectOutputGroupOutputWithTargetFramework.Culture)' == ''">$([System.String]::Copy("%(TargetPath)").Split('\')[0])</Culture>
      </_SatelliteDllsProjectOutputGroupOutputWithTargetFramework>
    </ItemGroup>
  </Target>

</Project>
